<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css">
    <style>
        .wh{
            float: left;
            background-color: white;
            border: 1px solid black;
            height: 50px;
            width: 50px;
        }
        .bla{
            float: left;
            background-color: black;
            border: 1px solid black;
            height: 50px;
            width: 50px;
        }
        .gr{
            float: left;
            background-color: green;
            border: 1px solid black;
            height: 10px;
            width: 10px;
        }
        .bl{
            float: left;
            background-color: blue;
            border: 1px solid black;
            height: 10px;
            width: 10px;
        }
        .re{
            float: left;
            background-color: red;
            border: 1px solid black;
            height: 10px;
            width: 10px;
        }
        .f{
            float: left;
            background-color: orange;
            border: 1px solid black;
            height: 10px;
            width: 10px;
            border-radius: 5px;
        
        }
    </style>
</head>

<body>
   
    <script>
        //若第二行为 (、[、+、-或 / 开头时，JavaScript不会自动添加分号
        var map = [
            [1, 3, 1, 1, 1, 1, 2, 1],
            [1, 2, 2, 2, 2, 1, 2, 1],
            [4, 2, 1, 1, 1, 5, 2, 1],
            [6, 2, 1, 2, 2, 1, 2, 1],
            [1, 1, 1, 2, 2, 4, 2, 1],
            [1, 2, 1, 2, 1, 1, 2, 1],
            [1, 2, 2, 2, 1, 2, 2, 1],
            [1, 2, 1, 1, 2, 1, 1, 2],
        ]

        var pacmacr = {
            r: 3,
            l: 0,
            dir:'right'
        }
        var pacmacg = {
            r: 0,
            l: 1,
            dir:'right'
        }
        var pacmacb = {
            r: 2,
            l: 5,
            dir:'right'
        }

        var world = document.querySelector('#world')
        draw = () => {
            var html = ''
            for (k in map) {
                for (j in map[k]) {
                    if (map[k][j] === 1) html += `<div class='wh'></div>`
                    else if (map[k][j] === 2) html += `<div class='bla' id="cat">B</div>`
                    else if (map[k][j] === 3) html += `<div class='gr'>C</div>`
                    else if (map[k][j] === 5) html += `<div class='bl'>C</div>`
                    else if (map[k][j] === 6) html += `<div class='re' id ='square'>C</div>`
                    else if (map[k][j] === 4) html += `<div class='f'>?</div>`
                }
                html += '<br>'
            }
            world.innerHTML = html
        }
        draw();
        var int = self.setInterval("mover()", 500);
        var int = self.setInterval("moveb()", 500);
        var int = self.setInterval("moveg()", 500);
        
        function mover(){
            if (pacmacr.dir==="right"){
                if (map[pacmacr.r][pacmacr.l + 1] == 2  ) {
                        pacmacr.dir='up'
                        
                        // map[pacmac.r][pacmac.l] = 3
                        // pacmac.l += 1
                        // map[pacmac.r][pacmac.l] = 4
                    }
                else if (map[pacmacr.r][pacmacr.l + 1] == 1 ){
                    map[pacmacr.r][pacmacr.l] = 1
                    pacmacr.l += 1
                    map[pacmacr.r][pacmacr.l] = 6
                }
                else if(map[pacmacr.r][pacmacr.l + 1] == 4){
                    map[pacmacr.r][pacmacr.l] = 1
                    pacmacr.l += 2
                    map[pacmacr.r][pacmacr.l] = 6
                }
            }
            else if(pacmacr.dir==="up"){
                if (map[pacmacr.r - 1][pacmacr.l] == 2 ) {
                    
                    pacmacr.dir='left'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacr.r - 1][pacmacr.l] == 1) {
                    map[pacmacr.r][pacmacr.l] = 1
                    pacmacr.r -= 1
                    map[pacmacr.r][pacmacr.l] = 6
                }
                else if (map[pacmacr.r - 1][pacmacr.l] == 4) {
                    map[pacmacr.r][pacmacr.l] = 1
                    map[pacmacr.r-1][pacmacr.l] = 1
                    pacmacr.r -= 2
                    map[pacmacr.r][pacmacr.l] = 6
                }
            }
            else if(pacmacr.dir==="left"){
                if (map[pacmacr.r][pacmacr.l - 1] == 2  ) {
                    pacmacr.dir='down'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.l -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacr.r][pacmacr.l-1] == 1){
                    map[pacmacr.r][pacmacr.l] = 1
                    pacmacr.l -= 1
                    map[pacmacr.r][pacmacr.l] = 6
                }
                else if(map[pacmacr.r][pacmacr.l + 1] == 4){
                    map[pacmacr.r][pacmacr.l] = 1

                    pacmacr.l -= 2
                    map[pacmacr.r][pacmacr.l] = 6
                }
            }
            else if(pacmacr.dir==="down"){
                if (map[pacmacr.r + 1][pacmacr.l] == 2 ) {
                    pacmacr.dir='right'
                    
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r += 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacr.r + 1][pacmacr.l] == 1) {
                    map[pacmacr.r][pacmacr.l] = 1
                    pacmacr.r += 1
                    map[pacmacr.r][pacmacr.l] = 6
                }
                else if (map[pacmacr.r +1][pacmacr.l] == 4) {
                    map[pacmacr.r][pacmacr.l] = 1
                    map[pacmacr.r+1][pacmacr.l] = 1
                    pacmacr.r += 2
                    map[pacmacr.r][pacmacr.l] = 6
                }
            }
            draw();
        }
        function moveb(){
            if (pacmacb.dir==="right"){
                if (map[pacmacb.r][pacmacb.l + 1] == 2 ) {
                        pacmacb.dir='up'

                        // map[pacmac.r][pacmac.l] = 3
                        // pacmac.l += 1
                        // map[pacmac.r][pacmac.l] = 4
                    }
                else if (map[pacmacb.r][pacmacb.l + 1] == 1){
                    map[pacmacb.r][pacmacb.l] = 1
                    pacmacb.l += 1
                    map[pacmacb.r][pacmacb.l] = 5
                }
                else if(map[pacmacb.r][pacmacb.l + 1] == 4){
                    map[pacmacb.r][pacmacb.l] = 1
                    pacmacb.l += 2
                    map[pacmacb.r][pacmacb.l] = 5
                }
            }
            else if(pacmacb.dir==="up"){
                if (map[pacmacb.r - 1][pacmacb.l] == 2 ) {

                    pacmacb.dir='left'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacb.r - 1][pacmacb.l] == 1) {
                    map[pacmacb.r][pacmacb.l] = 1
                    pacmacb.r -= 1
                    map[pacmacb.r][pacmacb.l] = 5
                }
                else if (map[pacmacb.r - 1][pacmacb.l] == 4) {
                    map[pacmacb.r][pacmacb.l] = 1
                    map[pacmacb.r-1][pacmacb.l] = 1
                    pacmacb.r -= 2
                    map[pacmacb.r][pacmacb.l] = 5
                }
            }
            else if(pacmacb.dir==="left"){
                if (map[pacmacb.r][pacmacb.l - 1] == 2 ) {
                    pacmacb.dir='down'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.l -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacb.r][pacmacb.l-1] == 1){
                    map[pacmacb.r][pacmacb.l] = 1
                    pacmacb.l -= 1
                    map[pacmacb.r][pacmacb.l] = 5
                }
                else if(map[pacmacb.r][pacmacb.l + 1] == 4){
                    map[pacmacb.r][pacmacb.l] = 1

                    pacmacb.l -= 2
                    map[pacmacb.r][pacmacb.l] = 5
                }
            }
            else if(pacmacb.dir==="down"){
                if (map[pacmacb.r + 1][pacmacb.l] == 2 ) {
                    pacmacb.dir='right'

                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r += 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacb.r + 1][pacmacb.l] == 1) {
                    map[pacmacb.r][pacmacb.l] = 1
                    pacmacb.r += 1
                    map[pacmacb.r][pacmacb.l] = 5
                }
                else if (map[pacmacb.r +1][pacmacb.l] == 4) {
                    map[pacmacb.r][pacmacb.l] = 1
                    map[pacmacb.r+1][pacmacb.l] = 1
                    pacmacb.r += 2
                    map[pacmacb.r][pacmacb.l] = 5
                }
            }
            draw();
        }
        function moveg(){
            if (pacmacg.dir==="right"){
                if (map[pacmacg.r][pacmacg.l + 1] == 2 ) {
                        pacmacg.dir='up'

                        // map[pacmac.r][pacmac.l] = 3
                        // pacmac.l += 1
                        // map[pacmac.r][pacmac.l] = 4
                    }
                else if (map[pacmacg.r][pacmacg.l + 1] == 1){
                    map[pacmacg.r][pacmacg.l] = 1
                    pacmacg.l += 1
                    map[pacmacg.r][pacmacg.l] = 3
                }
                else if(map[pacmacg.r][pacmacg.l + 1] == 4){
                    map[pacmacg.r][pacmacg.l] = 1
                    pacmacg.l += 2
                    map[pacmacg.r][pacmacg.l] = 3
                }
            }
            else if(pacmacg.dir==="up"){
                if (map[pacmacg.r - 1][pacmacg.l] == 2 ) {

                    pacmacg.dir='left'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacg.r - 1][pacmacg.l] == 1) {
                    map[pacmacg.r][pacmacg.l] = 1
                    pacmacg.r -= 1
                    map[pacmacg.r][pacmacg.l] = 3
                }
                else if (map[pacmacg.r - 1][pacmacg.l] == 4) {
                    map[pacmacg.r][pacmacg.l] = 1
                    map[pacmacg.r-1][pacmacg.l] = 1
                    pacmacg.r -= 2
                    map[pacmacg.r][pacmacg.l] = 3
                }
            }
            else if(pacmacg.dir==="left"){
                if (map[pacmacg.r][pacmacg.l - 1] == 2 ) {
                    pacmacg.dir='down'
                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.l -= 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacg.r][pacmacg.l-1] == 1){
                    map[pacmacg.r][pacmacg.l] = 1
                    pacmacg.l -= 1
                    map[pacmacg.r][pacmacg.l] = 3
                }
                else if(map[pacmacg.r][pacmacg.l + 1] == 4){
                    map[pacmacg.r][pacmacg.l] = 1

                    pacmacg.l -= 2
                    map[pacmacg.r][pacmacg.l] = 3
                }
            }
            else if(pacmacg.dir==="down"){
                if (map[pacmacg.r + 1][pacmacg.l] == 2 ) {
                    pacmacg.dir='right'

                    // map[pacmac.r][pacmac.l] = 3
                    // pacmac.r += 1
                    // map[pacmac.r][pacmac.l] = 4
                }
                else if (map[pacmacg.r + 1][pacmacg.l] == 1) {
                    map[pacmacg.r][pacmacg.l] = 1
                    pacmacg.r += 1
                    map[pacmacg.r][pacmacg.l] = 3
                }
                else if (map[pacmacg.r +1][pacmacg.l] == 4) {
                    map[pacmacg.r][pacmacg.l] = 1
                    map[pacmacg.r+1][pacmacg.l] = 1
                    pacmacg.r += 2
                    map[pacmacg.r][pacmacg.l] = 3
                }
            }
            draw();
        }
        
    </script>
</body>

</html>